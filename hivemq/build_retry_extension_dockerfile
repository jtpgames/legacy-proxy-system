FROM eclipse-temurin:11-jdk
WORKDIR /app

# Install Gradle
RUN apt-get update && apt-get install -y wget unzip && \
    wget https://services.gradle.org/distributions/gradle-8.5-bin.zip -P /tmp && \
    unzip -d /opt/gradle /tmp/gradle-8.5-bin.zip && \
    ln -s /opt/gradle/gradle-8.5/bin/gradle /usr/bin/gradle && \
    rm -rf /tmp/gradle-8.5-bin.zip && \
    apt-get clean

# The actual source code and build output will be mounted at runtime using:
# docker run --rm -v "./retry-priority-extension:/app" retry_extension_builder gradle build
